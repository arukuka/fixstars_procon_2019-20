# 素数大貧民ノート

## 触ってみて

- akemi 同士の対戦では山場のカードがなくなるのが先で、手札が結構余る
	```
	PS C:\msys64\home\capri_000\fixstars_contest_2020> python .\prime_daihinmin.py A .\akemi.exe B .\akemi.exe C .\akemi.exe D .\akemi.exe --time 30
	players: A, B, C, D
	stock: 2205
	time limit: 30.0
	No stock
	1 : D 270 OK 6.623
	2 : A 352 OK 1.819
	3 : C 383 OK 0.485
	4 : B 407 OK 1.003
	stock: 0
	time (s): 115.902
	```
- まずは戦略的なことを考えず、たくさん手札を消せるようにした方が良さそう
	- 手札が 0 になりそうになったらまた考える

## 手札を少なくするには

- 戦略的でもあるができるだけ自分が親になれると良い
- ベルフェカットができるならする
- メルセンヌカットができるならする
- 自分が親のとき、桁の中で最大の素数を出せば親になれる
	```
	7
	97
	997
	9973
	99991
	```
- 自分の手番のとき、枚数の多い数字を上位桁に持っていくことで優先的に使うようにする
	- 素数探索の上で参考になるもの
		- ルジャンドル予想: n^2 ~ (n+1)^2 の間に必ず素数が存在するという予想(未解決)
		- 十分大きな x について、区間 [x, x + O(x^(21/40))] は必ず素数を含むということが証明されている
	- とりあえず優先的に桁を消費した後の数を x としたとき [x, x + \sqrt(x)] まで探せばよいか？
		```cpp
		int v = x;
		int ans = 0;
		for (;;)
		{
			y = v - x;
			if (y * y > x) {
				break;
			}
			if (len(str(v)) > len(str(x))) {
				break;
			}
			if (is_prime(v)) {
				ans = v;
				break;
			}
			++v;
		}
		```
	- x が小さければ予想を信じて [x, 2x + 1] まで探索するので良さそう
	- 時間が足りなそうであれば pass する
- 2 手目のときだけ例外にして +1 した数から同じ桁で素数を探索して、枚数の多い数字が使われたらポイント高くする、とする。